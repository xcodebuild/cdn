import{r as f,F as Ce,y as _t,a8 as Qe,j as e,A as j,D as Ee,E as Be,G as L,J as Le,S as dt,bK as mt,K as B,N as H,O as Me,P as Wt,X as At,bL as Et,u as _,d as ze,s as O,I as T,B as z,n as w,k as ee,bM as He,bN as pe,bO as Bt,R as Ue,aF as qe,aG as Xe,aH as Ye,aI as Y,bP as ge,bQ as Ve,b as te,U as ut,bR as Lt,T as ht,o as Mt,aP as Ft,bS as Se,L as Z,V as Fe,h as Ot,bT as Ht,bU as Vt,g as Gt,as as xt,bV as Jt,bW as Kt,bX as qt,bY as ne,bZ as Xt,b_ as Yt,e as et,b$ as me,c0 as ue,W as he,c1 as Zt}from"./index-DRgDHYoO.js";import{o as tt,M as Qt}from"./MobileHeader-DLc6LEza.js";import{g as G,s as ve,U as Pe}from"./CommonDialog-CH82Q2vd.js";import{F as _e,d as ea,I as N,u as pt}from"./useLoading-Bp4Y2TVR.js";import{s as ta}from"./sortBy-Dh3PeFXX.js";import{T as aa,a as D}from"./Typography-BSwVQflm.js";import{u as gt,C as sa}from"./Checkbox-cv5AtFNC.js";import{c as ra}from"./index-B_9e4a9Y.js";import{V as oa,b as na,c as la,a as Ge}from"./VisibilityIcon-V3cq0ZxR.js";import{L as ft,A as vt}from"./LocaleSelect-BOMLswMy.js";import{S as We,O as Ae}from"./Select-CJl5VIAu.js";import{D as Q}from"./Divider-Nkit0Pid.js";import"./last-DXTTfs9a.js";import"./_baseEach-D6Q_2e16.js";import"./createSvgIcon-Bmjcqfz4.js";function ia(a,t=166){let o;function s(...l){const r=()=>{a.apply(this,l)};clearTimeout(o),o=setTimeout(r,t)}return s.clear=()=>{clearTimeout(o)},s}const ca=["onChange","maxRows","minRows","style","value"];function Ie(a){return parseInt(a,10)||0}const da={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function ma(a){return a==null||Object.keys(a).length===0||a.outerHeightStyle===0&&!a.overflowing}const ua=f.forwardRef(function(t,o){const{onChange:s,maxRows:l,minRows:r=1,style:i,value:d}=t,n=Ce(t,ca),{current:h}=f.useRef(d!=null),c=f.useRef(null),x=_t(o,c),v=f.useRef(null),p=f.useCallback(()=>{const g=c.current,S=tt(g).getComputedStyle(g);if(S.width==="0px")return{outerHeightStyle:0,overflowing:!1};const U=v.current;U.style.width=S.width,U.value=g.value||t.placeholder||"x",U.value.slice(-1)===`
`&&(U.value+=" ");const R=S.boxSizing,m=Ie(S.paddingBottom)+Ie(S.paddingTop),W=Ie(S.borderBottomWidth)+Ie(S.borderTopWidth),$=U.scrollHeight;U.value="x";const u=U.scrollHeight;let k=$;r&&(k=Math.max(Number(r)*u,k)),l&&(k=Math.min(Number(l)*u,k)),k=Math.max(k,u);const M=k+(R==="border-box"?m+W:0),V=Math.abs(k-$)<=1;return{outerHeightStyle:M,overflowing:V}},[l,r,t.placeholder]),y=f.useCallback(()=>{const g=p();if(ma(g))return;const b=c.current;b.style.height=`${g.outerHeightStyle}px`,b.style.overflow=g.overflowing?"hidden":""},[p]);Qe(()=>{const g=()=>{y()};let b;const S=ia(g),U=c.current,R=tt(U);R.addEventListener("resize",S);let m;return typeof ResizeObserver<"u"&&(m=new ResizeObserver(g),m.observe(U)),()=>{S.clear(),cancelAnimationFrame(b),R.removeEventListener("resize",S),m&&m.disconnect()}},[p,y]),Qe(()=>{y()});const C=g=>{h||y(),s&&s(g)};return e.jsxs(f.Fragment,{children:[e.jsx("textarea",j({value:d,onChange:C,ref:x,rows:r},n)),e.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:v,tabIndex:-1,style:j({},da.shadow,i,{paddingTop:0,paddingBottom:0})})]})});function ha(a){return Be("MuiSwitch",a)}const xa=Ee("MuiSwitch",["root","checked","disabled","action","input","thumb","track","focusVisible","readOnly","colorPrimary","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid","startDecorator","endDecorator"]),Je=xa;function pa(a){return Be("MuiRadio",a)}const ga=Ee("MuiRadio",["root","radio","icon","action","input","label","checked","disabled","focusVisible","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),ke=ga,fa=["checked","checkedIcon","defaultChecked","disabled","disableIcon","overlay","label","id","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","color","variant","size","uncheckedIcon","value","component","slots","slotProps"],va=a=>{const{checked:t,disabled:o,disableIcon:s,focusVisible:l,color:r,variant:i,size:d}=a,n={root:["root",t&&"checked",o&&"disabled",l&&"focusVisible",i&&`variant${H(i)}`,r&&`color${H(r)}`,d&&`size${H(d)}`],radio:["radio",t&&"checked",o&&"disabled"],icon:["icon"],action:["action",t&&"checked",s&&o&&"disabled",l&&"focusVisible"],input:["input"],label:["label"]};return Me(n,pa,{})};function ya(a,t){return typeof t=="object"&&t!==null?a===t:String(a)===String(t)}const ba=L("span",{name:"JoyRadio",slot:"Root",overridesResolver:(a,t)=>t.root})(({ownerState:a,theme:t})=>{var o,s,l;return[j({"--Icon-fontSize":"var(--Radio-size)","--Icon-color":"currentColor"},a.size==="sm"&&{"--Radio-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Radio-gap, 0.5rem)"},a.size==="md"&&{"--Radio-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Radio-gap, 0.625rem)"},a.size==="lg"&&{"--Radio-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Radio-gap, 0.75rem)"},{position:a.overlay?"initial":"relative",display:"inline-flex",boxSizing:"border-box",minWidth:0,fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Radio-size)",color:t.vars.palette.text.primary,[`&.${ke.disabled}`]:{color:(o=t.variants.plainDisabled)==null||(o=o[a.color])==null?void 0:o.color}},a.disableIcon&&{color:(s=t.variants[a.variant])==null||(s=s[a.color])==null?void 0:s.color,[`&.${ke.disabled}`]:{color:(l=t.variants[`${a.variant}Disabled`])==null||(l=l[a.color])==null?void 0:l.color}},a["data-parent"]==="RadioGroup"&&a["data-first-child"]===void 0&&{marginInlineStart:a.orientation==="horizontal"?"var(--RadioGroup-gap)":void 0,marginBlockStart:a.orientation==="horizontal"?void 0:"var(--RadioGroup-gap)"})]}),ja=L("span",{name:"JoyRadio",slot:"Radio",overridesResolver:(a,t)=>t.radio})(({ownerState:a,theme:t})=>{var o,s,l,r,i;const d=(o=t.variants[`${a.variant}`])==null?void 0:o[a.color];return[j({"--Icon-color":a.color!=="neutral"||a.variant==="solid"?"currentColor":t.vars.palette.text.icon,margin:0,boxSizing:"border-box",width:"var(--Radio-size)",height:"var(--Radio-size)",borderRadius:"var(--Radio-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},a.disableIcon&&{display:"contents"},{[`&.${ke.checked}`]:{"--Icon-color":"currentColor"}}),...a.disableIcon?[]:[j({},d,{backgroundColor:(s=d==null?void 0:d.backgroundColor)!=null?s:t.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(l=t.variants[`${a.variant}Hover`])==null?void 0:l[a.color]}},{"&:active":(r=t.variants[`${a.variant}Active`])==null?void 0:r[a.color]},{[`&.${ke.disabled}`]:(i=t.variants[`${a.variant}Disabled`])==null?void 0:i[a.color]}]]}),wa=L("span",{name:"JoyRadio",slot:"Action",overridesResolver:(a,t)=>t.action})(({theme:a,ownerState:t})=>{var o,s,l,r;return[{position:"absolute",textAlign:"left",borderRadius:`var(--Radio-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[a.focus.selector]:a.focus.default},...t.disableIcon?[(o=a.variants[t.variant])==null?void 0:o[t.color],{"&:hover":{"@media (hover: hover)":(s=a.variants[`${t.variant}Hover`])==null?void 0:s[t.color]}},{"&:active":(l=a.variants[`${t.variant}Active`])==null?void 0:l[t.color]},{[`&.${ke.disabled}`]:(r=a.variants[`${t.variant}Disabled`])==null?void 0:r[t.color]}]:[]]}),Na=L("input",{name:"JoyRadio",slot:"Input",overridesResolver:(a,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",height:"100%",width:"100%",cursor:"pointer"})),Sa=L("label",{name:"JoyRadio",slot:"Label",overridesResolver:(a,t)=>t.label})(({ownerState:a})=>j({flex:1,minWidth:0},a.disableIcon&&{zIndex:1,pointerEvents:"none"})),ka=L("span",{name:"JoyRadio",slot:"Icon",overridesResolver:(a,t)=>t.icon})(({ownerState:a})=>({width:"calc(var(--Radio-size) / 2)",height:"calc(var(--Radio-size) / 2)",borderRadius:"inherit",color:"inherit",backgroundColor:"currentColor",transform:a.checked?"scale(1)":"scale(0)"})),Ca=f.forwardRef(function(t,o){var s,l,r,i,d,n,h;const c=Le({props:t,name:"JoyRadio"}),{checked:x,checkedIcon:v,defaultChecked:p,disabled:y,disableIcon:C=!1,overlay:g=!1,label:b,id:S,name:U,onBlur:R,onChange:m,onFocus:W,onFocusVisible:$,readOnly:u,required:k,color:M,variant:V="outlined",size:ae="md",uncheckedIcon:J,value:A,component:E,slots:F={},slotProps:ye={}}=c,se=Ce(c,fa),P=f.useContext(_e),le=dt(S??(P==null?void 0:P.htmlFor)),I=f.useContext(mt),K=P!=null&&P.error?"danger":(s=(l=(r=t.color)!=null?r:P==null?void 0:P.color)!=null?l:M)!=null?s:"primary",q=P!=null&&P.error?"danger":(i=(d=(n=t.color)!=null?n:P==null?void 0:P.color)!=null?d:M)!=null?i:"neutral",re=t.size||(P==null?void 0:P.size)||(I==null?void 0:I.size)||ae,be=t.name||(I==null?void 0:I.name)||U,X=t.disableIcon||(I==null?void 0:I.disableIcon)||C,je=t.overlay||(I==null?void 0:I.overlay)||g,we={checked:typeof x>"u"&&A!=null?ya(I==null?void 0:I.value,A):x,defaultChecked:p,disabled:t.disabled||(P==null?void 0:P.disabled)||y,onBlur:R,onChange:m,onFocus:W,onFocusVisible:$},{getInputProps:Ne,checked:ie,disabled:bt,focusVisible:jt}=gt(we),wt=(h=t.color)!=null?h:ie?K:q,oe=j({},c,{checked:ie,disabled:bt,focusVisible:jt,color:wt,variant:V,size:re,disableIcon:X,overlay:je,orientation:I==null?void 0:I.orientation}),ce=va(oe),de=j({},se,{component:E,slots:F,slotProps:ye}),[Nt,St]=B("root",{ref:o,className:ce.root,elementType:ba,externalForwardedProps:de,ownerState:oe}),[kt,Ct]=B("radio",{className:ce.radio,elementType:ja,externalForwardedProps:de,ownerState:oe}),[zt,Tt]=B("icon",{className:ce.icon,elementType:ka,externalForwardedProps:de,ownerState:oe}),[Rt,Ut]=B("action",{className:ce.action,elementType:wa,externalForwardedProps:de,ownerState:oe}),[Pt,It]=B("input",{additionalProps:{type:"radio",role:void 0,id:le,name:be,readOnly:u,required:k??(P==null?void 0:P.required),value:String(A),"aria-describedby":P==null?void 0:P["aria-describedby"]},className:ce.input,elementType:Na,externalForwardedProps:de,getSlotProps:()=>Ne({onChange:I==null?void 0:I.onChange}),ownerState:oe}),[Dt,$t]=B("label",{additionalProps:{htmlFor:le},className:ce.label,elementType:Sa,externalForwardedProps:de,ownerState:oe});return e.jsxs(Nt,j({},St,{children:[e.jsxs(kt,j({},Ct,{children:[ie&&!X&&v,!ie&&!X&&J,!v&&!J&&!X&&e.jsx(zt,j({},Tt)),e.jsx(Rt,j({},Ut,{children:e.jsx(Pt,j({},It))}))]})),b&&e.jsx(Dt,j({},$t,{children:e.jsx(aa.Provider,{value:!0,children:b})}))]}))}),fe=Ca;function za(a){return Be("MuiRadioGroup",a)}Ee("MuiRadioGroup",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const Ta=["className","component","children","name","defaultValue","disableIcon","overlay","value","onChange","color","variant","size","orientation","role","slots","slotProps"],Ra=a=>{const{orientation:t,size:o,variant:s,color:l}=a,r={root:["root",t,s&&`variant${H(s)}`,l&&`color${H(l)}`,o&&`size${H(o)}`]};return Me(r,za,{})},Ua=L("div",{name:"JoyRadioGroup",slot:"Root",overridesResolver:(a,t)=>t.root})(({ownerState:a,theme:t})=>{var o;return j({},a.size==="sm"&&{"--RadioGroup-gap":"0.625rem"},a.size==="md"&&{"--RadioGroup-gap":"0.875rem"},a.size==="lg"&&{"--RadioGroup-gap":"1.25rem"},{display:"flex",margin:"var(--unstable_RadioGroup-margin)",flexDirection:a.orientation==="horizontal"?"row":"column",borderRadius:t.vars.radius.sm},(o=t.variants[a.variant])==null?void 0:o[a.color])}),Pa=f.forwardRef(function(t,o){const s=Le({props:t,name:"JoyRadioGroup"}),{className:l,component:r,children:i,name:d,defaultValue:n,disableIcon:h=!1,overlay:c,value:x,onChange:v,color:p="neutral",variant:y="plain",size:C="md",orientation:g="vertical",role:b="radiogroup",slots:S={},slotProps:U={}}=s,R=Ce(s,Ta),[m,W]=Wt({controlled:x,default:n,name:"RadioGroup"}),$=f.useContext(_e),u=t.size||($==null?void 0:$.size)||C,k=j({orientation:g,size:u,variant:y,color:p,role:b},s),M=Ra(k),V=dt(d),ae=f.useMemo(()=>({disableIcon:h,overlay:c,orientation:g,size:u,name:V,value:m,onChange:E=>{W(E.target.value),v&&v(E)}}),[h,V,v,c,g,W,u,m]),[J,A]=B("root",{ref:o,className:At(M.root,l),elementType:Ua,externalForwardedProps:j({},R,{component:r,slots:S,slotProps:U}),ownerState:k,additionalProps:{as:r,role:b,id:$==null?void 0:$.htmlFor,"aria-labelledby":$==null?void 0:$.labelId,"aria-describedby":$==null?void 0:$["aria-describedby"]}});return e.jsx(mt.Provider,{value:ae,children:e.jsx(J,j({},A,{children:e.jsx(_e.Provider,{value:void 0,children:f.Children.map(i,(E,F)=>f.isValidElement(E)?f.cloneElement(E,j({},F===0&&{"data-first-child":""},F===f.Children.count(i)-1&&{"data-last-child":""},{"data-parent":"RadioGroup"})):E)})}))})}),Ze=Pa,Ia=["checked","defaultChecked","disabled","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","id","color","variant","size","startDecorator","endDecorator","component","slots","slotProps"],Da=a=>{const{checked:t,disabled:o,focusVisible:s,readOnly:l,color:r,variant:i,size:d}=a,n={root:["root",t&&"checked",o&&"disabled",s&&"focusVisible",l&&"readOnly",i&&`variant${H(i)}`,r&&`color${H(r)}`,d&&`size${H(d)}`],thumb:["thumb",t&&"checked"],track:["track",t&&"checked"],action:["action",s&&"focusVisible"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Me(n,ha,{})},$a=({theme:a,ownerState:t})=>(o={})=>{var s,l,r;const i=((s=a.variants[`${t.variant}${o.state||""}`])==null?void 0:s[t.color])||{};return{"--Switch-trackBackground":(l=i.backgroundColor)!=null?l:a.vars.palette.background.surface,"--Switch-trackColor":i.color,"--Switch-trackBorderColor":t.variant==="outlined"?i.borderColor:"currentColor","--Switch-thumbBackground":i.color,"--Switch-thumbColor":(r=i.backgroundColor)!=null?r:a.vars.palette.background.surface}},_a=L("div",{name:"JoySwitch",slot:"Root",overridesResolver:(a,t)=>t.root})(({theme:a,ownerState:t})=>{var o;const s=$a({theme:a,ownerState:t});return j({"--Icon-color":"currentColor","--variant-borderWidth":(o=a.variants[t.variant])==null||(o=o[t.color])==null?void 0:o["--variant-borderWidth"],"--Switch-trackRadius":a.vars.radius.xl,"--Switch-thumbShadow":t.variant==="soft"?"none":"0 0 0 1px var(--Switch-trackBackground)"},t.size==="sm"&&{"--Switch-trackWidth":"26px","--Switch-trackHeight":"16px","--Switch-thumbSize":"10px",fontSize:a.vars.fontSize.sm,gap:"var(--Switch-gap, 6px)"},t.size==="md"&&{"--Switch-trackWidth":"32px","--Switch-trackHeight":"20px","--Switch-thumbSize":"14px",fontSize:a.vars.fontSize.md,gap:"var(--Switch-gap, 8px)"},t.size==="lg"&&{"--Switch-trackWidth":"40px","--Switch-trackHeight":"24px","--Switch-thumbSize":"18px",gap:"var(--Switch-gap, 12px)"},{"--unstable_paddingBlock":"max((var(--Switch-trackHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Switch-thumbSize)) / 2, 0px)","--Switch-thumbRadius":"max(var(--Switch-trackRadius) - var(--unstable_paddingBlock), min(var(--unstable_paddingBlock) / 2, var(--Switch-trackRadius) / 2))","--Switch-thumbWidth":"var(--Switch-thumbSize)","--Switch-thumbOffset":"max((var(--Switch-trackHeight) - var(--Switch-thumbSize)) / 2, 0px)"},s(),{"&:hover":{"@media (hover: hover)":j({},s({state:"Hover"}))},[`&.${Je.checked}`]:j({},s(),{"&:hover":{"@media (hover: hover)":j({},s({state:"Hover"}))}}),[`&.${Je.disabled}`]:j({pointerEvents:"none",color:a.vars.palette.text.tertiary},s({state:"Disabled"})),display:"inline-flex",alignItems:"center",alignSelf:"center",fontFamily:a.vars.fontFamily.body,position:"relative",padding:"calc((var(--Switch-thumbSize) / 2) - (var(--Switch-trackHeight) / 2)) calc(-1 * var(--Switch-thumbOffset))",backgroundColor:"initial",border:"none",margin:"var(--unstable_Switch-margin)"})}),Wa=L("div",{name:"JoySwitch",slot:"Action",overridesResolver:(a,t)=>t.action})(({theme:a})=>({borderRadius:"var(--Switch-trackRadius)",position:"absolute",top:0,left:0,bottom:0,right:0,[a.focus.selector]:a.focus.default})),Aa=L("input",{name:"JoySwitch",slot:"Input",overridesResolver:(a,t)=>t.input})({margin:0,height:"100%",width:"100%",opacity:0,position:"absolute",cursor:"pointer"}),Ea=L("span",{name:"JoySwitch",slot:"Track",overridesResolver:(a,t)=>t.track})(({theme:a,ownerState:t})=>j({position:"relative",color:"var(--Switch-trackColor)",height:"var(--Switch-trackHeight)",width:"var(--Switch-trackWidth)",display:"flex",flexShrink:0,justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",border:"var(--variant-borderWidth, 0px) solid",borderColor:"var(--Switch-trackBorderColor)",backgroundColor:"var(--Switch-trackBackground)",borderRadius:"var(--Switch-trackRadius)",fontFamily:a.vars.fontFamily.body},t.size==="sm"&&{fontSize:a.vars.fontSize.xs},t.size==="md"&&{fontSize:a.vars.fontSize.sm},t.size==="lg"&&{fontSize:a.vars.fontSize.md})),Ba=L("span",{name:"JoySwitch",slot:"Thumb",overridesResolver:(a,t)=>t.thumb})({"--Icon-fontSize":"calc(var(--Switch-thumbSize) * 0.75)",display:"inline-flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"50%",left:"calc(50% - var(--Switch-trackWidth) / 2 + var(--Switch-thumbWidth) / 2 + var(--Switch-thumbOffset))",transform:"translate(-50%, -50%)",width:"var(--Switch-thumbWidth)",height:"var(--Switch-thumbSize)",borderRadius:"var(--Switch-thumbRadius)",boxShadow:"var(--Switch-thumbShadow)",color:"var(--Switch-thumbColor)",backgroundColor:"var(--Switch-thumbBackground)",[`&.${Je.checked}`]:{left:"calc(50% + var(--Switch-trackWidth) / 2 - var(--Switch-thumbWidth) / 2 - var(--Switch-thumbOffset))"}}),La=L("span",{name:"JoySwitch",slot:"StartDecorator",overridesResolver:(a,t)=>t.startDecorator})({display:"inline-flex"}),Ma=L("span",{name:"JoySwitch",slot:"EndDecorator",overridesResolver:(a,t)=>t.endDecorator})({display:"inline-flex"}),Fa=f.forwardRef(function(t,o){var s,l,r,i,d,n;const h=Le({props:t,name:"JoySwitch"}),{disabled:c,id:x,color:v,variant:p="solid",size:y="md",startDecorator:C,endDecorator:g,component:b,slots:S={},slotProps:U={}}=h,R=Ce(h,Ia),m=f.useContext(_e),W=(s=(l=t.size)!=null?l:m==null?void 0:m.size)!=null?s:y,$=(r=t.color)!=null?r:m!=null&&m.error?"danger":(i=m==null?void 0:m.color)!=null?i:v,u=j({disabled:(d=(n=t.disabled)!=null?n:m==null?void 0:m.disabled)!=null?d:c},h),{getInputProps:k,checked:M,disabled:V,focusVisible:ae,readOnly:J}=gt(u),A=j({},h,{id:x,checked:M,disabled:V,focusVisible:ae,readOnly:J,color:M?$||"primary":$||"neutral",variant:p,size:W}),E=Da(A),F=j({},R,{component:b,slots:S,slotProps:U}),[ye,se]=B("root",{ref:o,className:E.root,elementType:_a,externalForwardedProps:F,ownerState:A}),[P,le]=B("startDecorator",{additionalProps:{"aria-hidden":!0},className:E.startDecorator,elementType:La,externalForwardedProps:F,ownerState:A}),[I,K]=B("endDecorator",{additionalProps:{"aria-hidden":!0},className:E.endDecorator,elementType:Ma,externalForwardedProps:F,ownerState:A}),[q,re]=B("track",{className:E.track,elementType:Ea,externalForwardedProps:F,ownerState:A}),[be,X]=B("thumb",{className:E.thumb,elementType:Ba,externalForwardedProps:F,ownerState:A}),[je,Re]=B("action",{className:E.action,elementType:Wa,externalForwardedProps:F,ownerState:A}),[we,Ne]=B("input",{additionalProps:{id:x??(m==null?void 0:m.htmlFor),"aria-describedby":m==null?void 0:m["aria-describedby"]},className:E.input,elementType:Aa,externalForwardedProps:F,getSlotProps:k,ownerState:A});return e.jsxs(ye,j({},se,{children:[C&&e.jsx(P,j({},le,{children:typeof C=="function"?C(A):C})),e.jsxs(q,j({},re,{children:[re==null?void 0:re.children,e.jsx(be,j({},X))]})),e.jsx(je,j({},Re,{children:e.jsx(we,j({},Ne))})),g&&e.jsx(I,j({},K,{children:typeof g=="function"?g(A):g}))]}))}),De=Fa;function Oa(a){return Be("MuiTextarea",a)}const Ha=Ee("MuiTextarea",["root","textarea","startDecorator","endDecorator","formControl","disabled","error","focused","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft"]),yt=Ha,Va=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","size","color","variant","startDecorator","endDecorator","minRows","maxRows","component","slots","slotProps"],Ga=a=>{const{disabled:t,variant:o,color:s,size:l}=a,r={root:["root",t&&"disabled",o&&`variant${H(o)}`,s&&`color${H(s)}`,l&&`size${H(l)}`],textarea:["textarea"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Me(r,Oa,{})},Ja=L("div",{name:"JoyTextarea",slot:"Root",overridesResolver:(a,t)=>t.root})(({theme:a,ownerState:t})=>{var o,s,l,r,i,d;const n=(o=a.variants[`${t.variant}`])==null?void 0:o[t.color];return[j({"--Textarea-radius":a.vars.radius.sm,"--Textarea-gap":"0.5rem","--Textarea-placeholderColor":"inherit","--Textarea-placeholderOpacity":.64,"--Textarea-decoratorColor":a.vars.palette.text.icon,"--Textarea-focused":"0","--Textarea-focusedThickness":a.vars.focus.thickness,"--Textarea-focusedHighlight":(s=a.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:s[500],'&:not([data-inverted-colors="false"])':j({},t.instanceColor&&{"--_Textarea-focusedHighlight":(l=a.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:l[500]},{"--Textarea-focusedHighlight":`var(--_Textarea-focusedHighlight, ${a.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Textarea-minHeight":"2rem","--Textarea-paddingBlock":"calc(0.375rem - 0.5px - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"0.5rem","--Textarea-decoratorChildHeight":"min(1.5rem, var(--Textarea-minHeight))","--Icon-fontSize":a.vars.fontSize.xl},t.size==="md"&&{"--Textarea-minHeight":"2.25rem","--Textarea-paddingBlock":"calc(0.375rem - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"0.75rem","--Textarea-decoratorChildHeight":"min(1.75rem, var(--Textarea-minHeight))","--Icon-fontSize":a.vars.fontSize.xl2},t.size==="lg"&&{"--Textarea-minHeight":"3rem","--Textarea-paddingBlock":"calc(0.75rem - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"1rem","--Textarea-gap":"0.75rem","--Textarea-decoratorChildHeight":"min(2.375rem, var(--Textarea-minHeight))","--Icon-fontSize":a.vars.fontSize.xl2},{"--_Textarea-paddingBlock":"max((var(--Textarea-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Textarea-decoratorChildHeight)) / 2, 0px)","--Textarea-decoratorChildRadius":"max(var(--Textarea-radius) - var(--variant-borderWidth, 0px) - var(--_Textarea-paddingBlock), min(var(--_Textarea-paddingBlock) + var(--variant-borderWidth, 0px), var(--Textarea-radius) / 2))","--Button-minHeight":"var(--Textarea-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Textarea-decoratorChildHeight)","--Button-radius":"var(--Textarea-decoratorChildRadius)","--IconButton-radius":"var(--Textarea-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:a.shadow.xs},{minWidth:0,minHeight:"var(--Textarea-minHeight)",cursor:"text",position:"relative",display:"flex",flexDirection:"column",paddingInlineStart:"var(--Textarea-paddingInline)",paddingBlock:"var(--Textarea-paddingBlock)",borderRadius:"var(--Textarea-radius)"},a.typography[`body-${t.size}`],n,{backgroundColor:(r=n==null?void 0:n.backgroundColor)!=null?r:a.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Textarea-focusedInset, inset) 0 0 0 calc(var(--Textarea-focused) * var(--Textarea-focusedThickness)) var(--Textarea-focusedHighlight)"}}),{"&:hover":j({},(i=a.variants[`${t.variant}Hover`])==null?void 0:i[t.color],{backgroundColor:null,cursor:"text"}),[`&.${yt.disabled}`]:(d=a.variants[`${t.variant}Disabled`])==null?void 0:d[t.color],"&:focus-within::before":{"--Textarea-focused":"1"}}]}),Ka=L(ua,{name:"JoyTextarea",slot:"Textarea",overridesResolver:(a,t)=>t.textarea})({resize:"none",border:"none",minWidth:0,outline:0,padding:0,paddingInlineEnd:"var(--Textarea-paddingInline)",flex:"auto",alignSelf:"stretch",color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit","&::-webkit-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"}}),qa=L("div",{name:"JoyTextarea",slot:"StartDecorator",overridesResolver:(a,t)=>t.startDecorator})({display:"flex",marginInlineStart:"calc(var(--Textarea-paddingBlock) - var(--Textarea-paddingInline))",marginInlineEnd:"var(--Textarea-paddingBlock)",marginBlockEnd:"var(--Textarea-gap)",color:"var(--Textarea-decoratorColor)",cursor:"initial"}),Xa=L("div",{name:"JoyTextarea",slot:"EndDecorator",overridesResolver:(a,t)=>t.endDecorator})({display:"flex",marginInlineStart:"calc(var(--Textarea-paddingBlock) - var(--Textarea-paddingInline))",marginInlineEnd:"var(--Textarea-paddingBlock)",marginBlockStart:"var(--Textarea-gap)",color:"var(--Textarea-decoratorColor)",cursor:"initial"}),Ya=f.forwardRef(function(t,o){var s,l,r,i,d,n,h,c;const x=Le({props:t,name:"JoyTextarea"}),v=ea(x,yt),{propsToForward:p,rootStateClasses:y,inputStateClasses:C,getRootProps:g,getInputProps:b,formControl:S,focused:U,error:R=!1,disabled:m=!1,size:W="md",color:$="neutral",variant:u="outlined",startDecorator:k,endDecorator:M,minRows:V,maxRows:ae,component:J,slots:A={},slotProps:E={}}=v,F=Ce(v,Va),ye=(s=(l=t.disabled)!=null?l:S==null?void 0:S.disabled)!=null?s:m,se=(r=(i=t.error)!=null?i:S==null?void 0:S.error)!=null?r:R,P=(d=(n=t.size)!=null?n:S==null?void 0:S.size)!=null?d:W,le=(h=t.color)!=null?h:se?"danger":(c=S==null?void 0:S.color)!=null?c:$,I=j({instanceColor:se?"danger":t.color},x,{color:le,disabled:ye,error:se,focused:U,size:P,variant:u}),K=Ga(I),q=j({},F,{component:J,slots:A,slotProps:E}),[re,be]=B("root",{ref:o,className:[K.root,y],elementType:Ja,externalForwardedProps:q,getSlotProps:g,ownerState:I}),[X,je]=B("textarea",{additionalProps:{id:S==null?void 0:S.htmlFor,"aria-describedby":S==null?void 0:S["aria-describedby"]},className:[K.textarea,C],elementType:Ka,internalForwardedProps:j({},p,{minRows:V,maxRows:ae}),externalForwardedProps:q,getSlotProps:b,ownerState:I}),[Re,we]=B("startDecorator",{className:K.startDecorator,elementType:qa,externalForwardedProps:q,ownerState:I}),[Ne,ie]=B("endDecorator",{className:K.endDecorator,elementType:Xa,externalForwardedProps:q,ownerState:I});return e.jsxs(re,j({},be,{children:[k&&e.jsx(Re,j({},we,{children:k})),e.jsx(X,j({},je)),M&&e.jsx(Ne,j({},ie,{children:M}))]}))}),Ke=Ya;function $e(a,t){return Et(a,t)}const Za=a=>{const{user:t,destroy:o}=a,s=_(),l=ze(),[r,i]=f.useState(""),[d,n]=f.useState("");f.useEffect(()=>{},[]);const h=()=>{o()},c=p=>{const y=p.target.value;i(y)},x=p=>{const y=p.target.value;n(y)},v=async()=>{if(r===""||d===""){w.error(s("message.fill-all"));return}if(r!==d){w.error(s("message.new-password-not-match")),n("");return}try{await l.updateUser({name:t.name,password:r},["password"]),w(s("message.password-changed")),h()}catch(p){console.error(p),w.error(p.response.data.message)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container !w-64",children:[e.jsxs("p",{className:"title-text",children:[s("setting.account-section.change-password")," (",t.nickname,")"]}),e.jsx(O,{size:"sm",onClick:h,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container",children:[e.jsx("p",{className:"text-sm mb-1",children:s("auth.new-password")}),e.jsx(N,{className:"w-full",type:"password",placeholder:s("auth.new-password"),value:r,onChange:c}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:s("auth.repeat-new-password")}),e.jsx(N,{className:"w-full",type:"password",placeholder:s("auth.repeat-new-password"),value:d,onChange:x}),e.jsxs("div",{className:"flex flex-row justify-end items-center mt-4 w-full gap-x-2",children:[e.jsx(z,{color:"neutral",variant:"plain",onClick:h,children:s("common.cancel")}),e.jsx(z,{color:"primary",onClick:v,children:s("common.save")})]})]})]})};function Qa(a){G({className:"change-member-password-dialog",dialogName:"change-member-password-dialog"},Za,{user:a})}const es=()=>{const a=_(),t=ee(),o=ze(),[s,l]=f.useState({creatingUser:He.fromPartial({username:"",password:"",role:pe.USER})}),[r,i]=f.useState([]),d=ta(r,"id");f.useEffect(()=>{n()},[]);const n=async()=>{const b=await o.fetchUsers();i(b)},h=b=>{l({...s,creatingUser:{...s.creatingUser,username:b.target.value}})},c=b=>{l({...s,creatingUser:{...s.creatingUser,password:b.target.value}})},x=b=>{l({...s,creatingUser:{...s.creatingUser,role:b.target.value}})},v=async()=>{if(s.creatingUser.username===""||s.creatingUser.password===""){w.error(a("message.fill-form"));return}try{await ge.createUser({user:{name:`${Ve}${s.creatingUser.username}`,password:s.creatingUser.password,role:s.creatingUser.role}})}catch(b){w.error(b.details)}await n(),l({...s,creatingUser:He.fromPartial({username:"",password:"",role:pe.USER})})},p=b=>{Qa(b)},y=b=>{ve({title:a("setting.member-section.archive-member"),content:a("setting.member-section.archive-warning",{username:b.nickname}),style:"danger",dialogName:"archive-user-dialog",onConfirm:async()=>{await ge.updateUser({user:{name:b.name,rowStatus:Ue.ARCHIVED},updateMask:["row_status"]}),n()}})},C=async b=>{await ge.updateUser({user:{name:b.name,rowStatus:Ue.ACTIVE},updateMask:["row_status"]}),n()},g=b=>{ve({title:a("setting.member-section.delete-member"),content:a("setting.member-section.delete-warning",{username:b.nickname}),style:"danger",dialogName:"delete-user-dialog",onConfirm:async()=>{await o.deleteUser(b.name),n()}})};return e.jsxs("div",{className:"w-full flex flex-col gap-2 pt-2 pb-4",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:a("setting.member-section.create-a-member")}),e.jsxs("div",{className:"w-auto flex flex-col justify-start items-start gap-2 border rounded-md py-2 px-3 dark:border-zinc-700",children:[e.jsxs("div",{className:"flex flex-col justify-start items-start gap-1",children:[e.jsx("span",{children:a("common.username")}),e.jsx(N,{type:"text",placeholder:a("common.username"),value:s.creatingUser.username,onChange:h})]}),e.jsxs("div",{className:"flex flex-col justify-start items-start gap-1",children:[e.jsx("span",{children:a("common.password")}),e.jsx(N,{type:"password",placeholder:a("common.password"),value:s.creatingUser.password,onChange:c})]}),e.jsxs("div",{className:"flex flex-col justify-start items-start gap-1",children:[e.jsx("span",{children:a("common.role")}),e.jsxs(Ze,{orientation:"horizontal",defaultValue:pe.USER,onChange:x,children:[e.jsx(fe,{value:pe.USER,label:"User"}),e.jsx(fe,{value:pe.ADMIN,label:"Admin"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(z,{onClick:v,children:a("common.create")})})]}),e.jsx("div",{className:"w-full flex flex-row justify-between items-center mt-6",children:e.jsx("div",{className:"title-text",children:a("setting.member-list")})}),e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full align-middle border rounded-lg dark:border-zinc-600",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300 dark:divide-zinc-600",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-sm font-semibold text-left text-gray-900 dark:text-gray-400",children:[e.jsx("th",{scope:"col",className:"px-3 py-2",children:"ID"}),e.jsx("th",{scope:"col",className:"px-3 py-2",children:a("common.role")}),e.jsx("th",{scope:"col",className:"px-3 py-2",children:a("common.username")}),e.jsx("th",{scope:"col",className:"px-3 py-2",children:a("common.nickname")}),e.jsx("th",{scope:"col",className:"px-3 py-2",children:a("common.email")}),e.jsx("th",{scope:"col",className:"relative py-2 pl-3 pr-4"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-zinc-600",children:d.map(b=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-900 dark:text-gray-400",children:b.id}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:Bt(b.role)}),e.jsxs("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:[b.username,e.jsx("span",{className:"ml-1 italic",children:b.rowStatus===Ue.ARCHIVED&&"(Archived)"})]}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:b.nickname}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:b.email}),e.jsx("td",{className:"relative whitespace-nowrap py-2 pl-3 pr-4 text-right text-sm font-medium flex justify-end",children:(t==null?void 0:t.id)===b.id?e.jsx("span",{children:a("common.yourself")}):e.jsxs(qe,{children:[e.jsx(Xe,{size:"sm",children:e.jsx(T.MoreVertical,{className:"w-4 h-auto"})}),e.jsxs(Ye,{placement:"bottom-end",size:"sm",children:[e.jsx(Y,{onClick:()=>p(b),children:a("setting.account-section.change-password")}),b.rowStatus===Ue.ACTIVE?e.jsx(Y,{onClick:()=>y(b),children:a("setting.member-section.archive-member")}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{onClick:()=>C(b),children:a("common.restore")}),e.jsx(Y,{onClick:()=>g(b),children:a("setting.member-section.delete-member")})]})]})]})})]},b.id))})]})})})]})},ts=({destroy:a})=>{const t=_(),o=ee(),s=ze(),r=te().state.systemStatus.profile,[i,d]=f.useState(""),[n,h]=f.useState("");f.useEffect(()=>{r.mode==="demo"&&(w.error("Demo mode does not support this operation."),a())},[]);const c=()=>{a()},x=y=>{d(y.target.value)},v=y=>{h(y.target.value)},p=async()=>{if(i===""||n===""){w.error(t("message.fill-all"));return}if(i!==n){w.error(t("message.new-password-not-match")),h("");return}try{await s.updateUser({name:o.name,password:i},["password"]),w.success(t("message.password-changed")),c()}catch(y){console.error(y),w.error(y.response.data.message)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container !w-64",children:[e.jsx("p",{className:"title-text",children:t("setting.account-section.change-password")}),e.jsx(O,{size:"sm",onClick:c,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container",children:[e.jsx("p",{className:"text-sm mb-1",children:t("auth.new-password")}),e.jsx(N,{className:"w-full",type:"password",placeholder:t("auth.new-password"),value:i,onChange:x}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:t("auth.repeat-new-password")}),e.jsx(N,{className:"w-full",type:"password",placeholder:t("auth.repeat-new-password"),value:n,onChange:v}),e.jsxs("div",{className:"w-full flex flex-row justify-end items-center pt-4 space-x-2",children:[e.jsx(z,{color:"neutral",variant:"plain",onClick:c,children:t("common.cancel")}),e.jsx(z,{color:"primary",onClick:p,children:t("common.save")})]})]})]})};function as(){G({className:"change-password-dialog",dialogName:"change-password-dialog"},ts)}const ss=({destroy:a})=>{const t=_(),o=ee(),s=ze(),[l,r]=f.useState({avatarUrl:o.avatarUrl,username:o.name.replace(Ve,""),nickname:o.nickname,email:o.email}),i=()=>{a()},d=p=>{r(y=>({...y,...p}))},n=async p=>{const y=p.target.files;if(y&&y.length>0){const C=y[0];if(C.size>2*1024*1024){w.error("Max file size is 2MB");return}try{const g=await Lt(C);d({avatarUrl:g})}catch(g){console.error(g),w.error("Failed to convert image to base64")}}},h=p=>{d({nickname:p.target.value})},c=p=>{d({username:p.target.value})},x=p=>{r(y=>({...y,email:p.target.value}))},v=async()=>{if(l.username===""){w.error(t("message.fill-all"));return}try{const p=[];$e(o.name.replace(Ve,""),l.username)||p.push("username"),$e(o.nickname,l.nickname)||p.push("nickname"),$e(o.email,l.email)||p.push("email"),$e(o.avatarUrl,l.avatarUrl)||p.push("avatar_url"),await s.updateUser(He.fromPartial({name:o.name,username:l.username,nickname:l.nickname,email:l.email,avatarUrl:l.avatarUrl}),p),w.success(t("message.update-succeed")),i()}catch(p){console.error(p),w.error(p.details)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container !w-64",children:[e.jsx("p",{className:"title-text",children:t("setting.account-section.update-information")}),e.jsx(O,{size:"sm",onClick:i,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container space-y-2",children:[e.jsxs("div",{className:"w-full flex flex-row justify-start items-center",children:[e.jsx("span",{className:"text-sm mr-2",children:t("common.avatar")}),e.jsxs("label",{className:"relative cursor-pointer hover:opacity-80",children:[e.jsx(ut,{className:"!w-10 !h-10",avatarUrl:l.avatarUrl}),e.jsx("input",{type:"file",accept:"image/*",className:"absolute invisible w-full h-full inset-0",onChange:n})]}),l.avatarUrl&&e.jsx(T.X,{className:"w-4 h-auto ml-1 cursor-pointer opacity-60 hover:opacity-80",onClick:()=>d({avatarUrl:""})})]}),e.jsxs("p",{className:"text-sm",children:[t("common.username"),e.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",t("setting.account-section.username-note"),")"]})]}),e.jsx(N,{className:"w-full",value:l.username,onChange:c}),e.jsxs("p",{className:"text-sm",children:[t("common.nickname"),e.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",t("setting.account-section.nickname-note"),")"]})]}),e.jsx(N,{className:"w-full",value:l.nickname,onChange:h}),e.jsxs("p",{className:"text-sm",children:[t("common.email"),e.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",t("setting.account-section.email-note"),")"]})]}),e.jsx(N,{className:"w-full",type:"email",value:l.email,onChange:x}),e.jsxs("div",{className:"w-full flex flex-row justify-end items-center pt-4 space-x-2",children:[e.jsx(z,{color:"neutral",variant:"plain",onClick:i,children:t("common.cancel")}),e.jsx(z,{color:"primary",onClick:v,children:t("common.save")})]})]})]})};function rs(){G({className:"update-account-dialog",dialogName:"update-account-dialog"},ss)}const os=[{label:"8 hours",value:3600*8},{label:"1 month",value:3600*24*30},{label:"Never",value:0}],ns=a=>{const{destroy:t,onConfirm:o}=a,s=_(),l=ee(),[r,i]=f.useState({description:"",expiration:3600*8}),d=pt(!1),n=v=>{i({...r,...v})},h=v=>{n({description:v.target.value})},c=v=>{n({expiration:Number(v.target.value)})},x=async()=>{if(!r.description){w.error("Description is required");return}try{await ge.createUserAccessToken({name:l.name,description:r.description,expiresAt:r.expiration?new Date(Date.now()+r.expiration*1e3):void 0}),o(),t()}catch(v){console.error(v),w.error(v.response.data.message)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("p",{className:"title-text",children:"Create access token"}),e.jsx(O,{size:"sm",onClick:()=>t(),children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container !w-80",children:[e.jsxs("div",{className:"w-full flex flex-col justify-start items-start mb-3",children:[e.jsxs("span",{className:"mb-2",children:["Description ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"relative w-full",children:e.jsx(N,{className:"w-full",type:"text",placeholder:"Some description",value:r.description,onChange:h})})]}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start mb-3",children:[e.jsxs("span",{className:"mb-2",children:["Expiration ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"w-full flex flex-row justify-start items-center text-base",children:e.jsx(Ze,{orientation:"horizontal",value:r.expiration,onChange:c,children:os.map(v=>e.jsx(fe,{value:v.value,checked:r.expiration===v.value,label:v.label},v.value))})})]}),e.jsxs("div",{className:"w-full flex flex-row justify-end items-center mt-4 space-x-2",children:[e.jsx(z,{color:"neutral",variant:"plain",disabled:d.isLoading,loading:d.isLoading,onClick:t,children:s("common.cancel")}),e.jsx(z,{color:"primary",disabled:d.isLoading,loading:d.isLoading,onClick:x,children:s("common.create")})]})]})]})};function ls(a){G({className:"create-access-token-dialog",dialogName:"create-access-token-dialog"},ns,{onConfirm:a})}const Te=a=>{const{className:t,url:o,title:s}=a,l=_();return e.jsx(e.Fragment,{children:e.jsx(ht,{title:s??l("common.learn-more"),placement:"top",children:e.jsx("a",{className:`text-gray-500 dark:text-gray-400 hover:text-blue-600 ${t}`,href:o,target:"_blank",children:e.jsx(T.ExternalLink,{className:"w-4 h-auto"})})})})},at=async a=>{const{accessTokens:t}=await ge.listUserAccessTokens({name:a});return t},is=()=>{const a=_(),t=ee(),[o,s]=f.useState([]);f.useEffect(()=>{at(t.name).then(n=>{s(n)})},[]);const l=async()=>{const n=await at(t.name);s(n)},r=n=>{ra(n),w.success("Access token copied to clipboard")},i=async n=>{ve({title:"Delete Access Token",content:`Are you sure to delete access token \`${d(n)}\`? You cannot undo this action.`,style:"danger",dialogName:"delete-access-token-dialog",onConfirm:async()=>{await ge.deleteUserAccessToken({name:t.name,accessToken:n}),s(o.filter(h=>h.accessToken!==n))}})},d=n=>`${n.slice(0,4)}****${n.slice(-4)}`;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-4 w-full flex flex-col justify-start items-start space-y-4",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"sm:flex-auto space-y-1",children:[e.jsxs("p",{className:"flex flex-row justify-start items-center font-medium text-gray-700 dark:text-gray-400",children:["Access Tokens",e.jsx(Te,{className:"ml-2",url:"https://usememos.com/docs/security/access-tokens"})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-500",children:"A list of all access tokens for your account."})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(z,{variant:"outlined",color:"neutral",onClick:()=>{ls(l)},children:a("common.create")})})]}),e.jsx("div",{className:"mt-2 flow-root",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300 dark:divide-zinc-600",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Token"}),e.jsx("th",{scope:"col",className:"py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Description"}),e.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Created At"}),e.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Expires At"}),e.jsx("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4",children:e.jsx("span",{className:"sr-only",children:a("common.delete")})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-zinc-700",children:o.map(n=>{var h,c;return e.jsxs("tr",{children:[e.jsxs("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-900 dark:text-gray-400 flex flex-row justify-start items-center gap-x-1",children:[e.jsx("span",{className:"font-mono",children:d(n.accessToken)}),e.jsx(O,{color:"neutral",variant:"plain",size:"sm",onClick:()=>r(n.accessToken),children:e.jsx(T.Clipboard,{className:"w-4 h-auto text-gray-400"})})]}),e.jsx("td",{className:"whitespace-nowrap py-2 pl-4 pr-3 text-sm text-gray-900 dark:text-gray-400",children:n.description}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:(h=n.issuedAt)==null?void 0:h.toLocaleString()}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:((c=n.expiresAt)==null?void 0:c.toLocaleString())??"Never"}),e.jsx("td",{className:"relative whitespace-nowrap py-2 pl-3 pr-4 text-right text-sm",children:e.jsx(O,{color:"danger",variant:"plain",size:"sm",onClick:()=>{i(n.accessToken)},children:e.jsx(T.Trash,{className:"w-4 h-auto"})})})]},n.accessToken)})})]})})})})]})})})},cs=()=>{const a=_(),t=ee(),o=async s=>{const{content:l}=await Mt.exportMemos({filter:`creator == "${s.name}"`}),r=window.URL.createObjectURL(new Blob([l]));Ft(r,"memos-export.zip"),URL.revokeObjectURL(r)};return e.jsxs("div",{className:"w-full gap-2 pt-2 pb-4",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:a("setting.account-section.title")}),e.jsxs("div",{className:"mt-1 flex flex-row justify-start items-center",children:[e.jsx(ut,{className:"mr-2",avatarUrl:t.avatarUrl}),e.jsxs("div",{className:"flex flex-col justify-center items-start",children:[e.jsx("span",{className:"text-2xl font-medium",children:t.nickname}),e.jsxs("span",{className:"-mt-2 text-base text-gray-500 dark:text-gray-400",children:["(",t.username,")"]})]})]}),e.jsxs("div",{className:"w-full flex flex-row justify-start items-center mt-2 space-x-2",children:[e.jsx(z,{variant:"outlined",onClick:rs,children:a("common.edit")}),e.jsx(z,{variant:"outlined",onClick:as,children:a("setting.account-section.change-password")}),e.jsx(z,{variant:"outlined",onClick:()=>o(t),children:a("setting.account-section.export-memos")})]}),e.jsx(is,{})]})},ds=a=>{const{webhookId:t,destroy:o,onConfirm:s}=a,l=_(),[r,i]=f.useState({name:"",url:""}),d=pt(!1),n=t===void 0;f.useEffect(()=>{t&&Se.getWebhook({id:t}).then(({webhook:p})=>{p&&i({name:p.name,url:p.url})})},[]);const h=p=>{i({...r,...p})},c=p=>{h({name:p.target.value})},x=p=>{h({url:p.target.value})},v=async()=>{if(!r.name||!r.url){w.error("Please fill all required fields");return}try{n?await Se.createWebhook({name:r.name,url:r.url}):await Se.updateWebhook({webhook:{id:t,name:r.name,url:r.url},updateMask:["name","url"]}),s(),o()}catch(p){console.error(p),w.error(p.details)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("p",{className:"title-text",children:n?"Create webhook":"Edit webhook"}),e.jsx(O,{size:"sm",onClick:()=>o(),children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container !w-80",children:[e.jsxs("div",{className:"w-full flex flex-col justify-start items-start mb-3",children:[e.jsxs("span",{className:"mb-2",children:["Title ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"relative w-full",children:e.jsx(N,{className:"w-full",type:"text",placeholder:"An easy-to-remember name",value:r.name,onChange:c})})]}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start mb-3",children:[e.jsxs("span",{className:"mb-2",children:["Payload URL ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"relative w-full",children:e.jsx(N,{className:"w-full",type:"text",placeholder:"https://example.com/postreceive",value:r.url,onChange:x})})]}),e.jsxs("div",{className:"w-full flex flex-row justify-end items-center mt-2 space-x-2",children:[e.jsx(z,{color:"neutral",variant:"plain",disabled:d.isLoading,loading:d.isLoading,onClick:o,children:l("common.cancel")}),e.jsx(z,{color:"primary",disabled:d.isLoading,loading:d.isLoading,onClick:v,children:l("common.create")})]})]})]})};function ms(a){G({className:"create-webhook-dialog",dialogName:"create-webhook-dialog"},ds,{onConfirm:a})}const st=async a=>{const{webhooks:t}=await Se.listWebhooks({creatorId:a});return t},us=()=>{const a=_(),t=ee(),[o,s]=f.useState([]);f.useEffect(()=>{st(t.id).then(i=>{s(i)})},[]);const l=async()=>{const i=await st(t.id);s(i)},r=async i=>{ve({title:"Delete Webhook",content:`Are you sure to delete webhook \`${i.name}\`? You cannot undo this action.`,style:"danger",dialogName:"delete-webhook-dialog",onConfirm:async()=>{await Se.deleteWebhook({id:i.id}),s(o.filter(d=>d.id!==i.id))}})};return e.jsxs("div",{className:"w-full flex flex-col justify-start items-start",children:[e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("div",{className:"flex-auto space-y-1",children:e.jsx("p",{className:"flex flex-row justify-start items-center font-medium text-gray-700 dark:text-gray-400",children:"Webhooks"})}),e.jsx("div",{children:e.jsx(z,{variant:"outlined",color:"neutral",onClick:()=>{ms(l)},children:a("common.create")})})]}),e.jsx("div",{className:"w-full mt-2 flow-root",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full border rounded-lg align-middle dark:border-zinc-600",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300 dark:divide-zinc-600",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Name"}),e.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Url"}),e.jsx("th",{scope:"col",className:"relative px-3 py-2 pr-4",children:e.jsx("span",{className:"sr-only",children:a("common.delete")})})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-500",children:[o.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-900 dark:text-gray-400",children:i.name}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-900 dark:text-gray-400",children:i.url}),e.jsx("td",{className:"relative whitespace-nowrap px-3 py-2 text-right text-sm",children:e.jsx(O,{color:"danger",variant:"plain",size:"sm",onClick:()=>{r(i)},children:e.jsx(T.Trash,{className:"w-4 h-auto"})})})]},i.id)),o.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-900 dark:text-gray-400",colSpan:3,children:"No webhooks found."})})]})]})})})}),e.jsx("div",{className:"w-full mt-2",children:e.jsxs(Z,{className:"text-gray-500 text-sm inline-flex flex-row justify-start items-center hover:underline hover:text-blue-600",to:"https://usememos.com/docs/advanced-settings/webhook",target:"_blank",children:[a("common.learn-more"),e.jsx(T.ExternalLink,{className:"inline w-4 h-auto ml-1"})]})})]})},hs=()=>{const a=_(),t=te(),o=ze(),s=o.userSetting,[l,r]=f.useState(s.telegramUserId),i=async x=>{await o.updateUserSetting({locale:x},["locale"]),t.setLocale(x)},d=async x=>{await o.updateUserSetting({appearance:x},["appearance"]),t.setAppearance(x)},n=async x=>{await o.updateUserSetting({memoVisibility:x},["memo_visibility"])},h=async()=>{try{await o.updateUserSetting({telegramUserId:l},["telegram_user_id"]),w.success(a("message.update-succeed"))}catch(x){console.error(x),w.error(x.response.data.message)}},c=async x=>{r(x)};return e.jsxs("div",{className:"w-full flex flex-col gap-2 pt-2 pb-4",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:a("common.basic")}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{children:a("common.language")}),e.jsx(ft,{value:s.locale,onChange:i})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{children:a("setting.preference-section.theme")}),e.jsx(vt,{value:s.appearance,onChange:d})]}),e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:a("setting.preference")}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{className:"truncate",children:a("setting.preference-section.default-memo-visibility")}),e.jsx(We,{className:"!min-w-fit",value:s.memoVisibility,startDecorator:e.jsx(oa,{visibility:na(s.memoVisibility)}),onChange:(x,v)=>{v&&n(v)},children:[Fe.PRIVATE,Fe.PROTECTED,Fe.PUBLIC].map(x=>la(x)).map(x=>e.jsx(Ae,{value:x,className:"whitespace-nowrap",children:a(`memo.visibility.${x.toLowerCase()}`)},x))})]}),e.jsx(Q,{className:"!my-3"}),e.jsxs("div",{className:"space-y-2 border rounded-md py-2 px-3 dark:border-zinc-700",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("div",{className:"w-auto flex items-center",children:e.jsx("span",{className:"mr-1",children:a("setting.preference-section.telegram-user-id")})}),e.jsx(z,{variant:"outlined",color:"neutral",onClick:h,children:a("common.save")})]}),e.jsx(N,{className:"w-full",sx:{fontFamily:"monospace",fontSize:"14px"},value:l,onChange:x=>c(x.target.value),placeholder:a("setting.preference-section.telegram-user-id-placeholder")}),e.jsx("div",{className:"w-full",children:e.jsxs(Z,{className:"text-gray-500 text-sm inline-flex flex-row justify-start items-center hover:underline hover:text-blue-600",to:"https://usememos.com/docs/integration/telegram-bot",target:"_blank",children:[a("common.learn-more"),e.jsx(T.ExternalLink,{className:"inline w-4 h-auto ml-1"})]})})]}),e.jsx(Q,{className:"!my-3"}),e.jsx(us,{})]})},Oe=[{id:Pe,name:"GitHub",type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"https://github.com/login/oauth/authorize",tokenUrl:"https://github.com/login/oauth/access_token",userInfoUrl:"https://api.github.com/user",scopes:["read:user"],fieldMapping:{identifier:"login",displayName:"name",email:"email"}}}},{id:Pe,name:"GitLab",type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"https://gitlab.com/oauth/authorize",tokenUrl:"https://gitlab.com/oauth/token",userInfoUrl:"https://gitlab.com/oauth/userinfo",scopes:["openid"],fieldMapping:{identifier:"name",displayName:"name",email:"email"}}}},{id:Pe,name:"Google",type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"https://accounts.google.com/o/oauth2/v2/auth",tokenUrl:"https://oauth2.googleapis.com/token",userInfoUrl:"https://www.googleapis.com/oauth2/v2/userinfo",scopes:["https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile"],fieldMapping:{identifier:"email",displayName:"name",email:"email"}}}},{id:Pe,name:"Custom",type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",userInfoUrl:"",scopes:[],fieldMapping:{identifier:"",displayName:"",email:""}}}}],xs=a=>{const t=_(),o=[...new Set(Oe.map(m=>m.type))],{confirmCallback:s,destroy:l,identityProvider:r}=a,[i,d]=f.useState({name:"",identifierFilter:""}),[n,h]=f.useState("OAUTH2"),[c,x]=f.useState({clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",userInfoUrl:"",scopes:[],fieldMapping:{identifier:"",displayName:"",email:""}}),[v,p]=f.useState(""),[y,C]=f.useState("GitHub"),g=r===void 0;f.useEffect(()=>{r&&(d({name:r.name,identifierFilter:r.identifierFilter}),h(r.type),r.type==="OAUTH2"&&(x(r.config.oauth2Config),p(r.config.oauth2Config.scopes.join(" "))))},[]),f.useEffect(()=>{if(!g)return;const m=Oe.find(W=>W.name===y);m&&(d({name:m.name,identifierFilter:m.identifierFilter}),h(m.type),m.type==="OAUTH2"&&(x(m.config.oauth2Config),p(m.config.oauth2Config.scopes.join(" "))))},[y]);const b=()=>{l()},S=()=>!(i.name===""||n==="OAUTH2"&&(c.clientId===""||c.authUrl===""||c.tokenUrl===""||c.userInfoUrl===""||v===""||c.fieldMapping.identifier===""||g&&c.clientSecret==="")),U=async()=>{try{g?(await Ht({...i,type:n,config:{oauth2Config:{...c,scopes:v.split(" ")}}}),w.success(t("setting.sso-section.sso-created",{name:i.name}))):(await Vt({id:r.id,type:n,...i,config:{oauth2Config:{...c,scopes:v.split(" ")}}}),w.success(t("setting.sso-section.sso-updated",{name:i.name})))}catch(m){console.error(m),w.error(m.response.data.message)}s&&s(),l()},R=m=>{x({...c,...m})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("p",{className:"title-text ml-auto",children:t(g?"setting.sso-section.create-sso":"setting.sso-section.update-sso")}),e.jsx(O,{size:"sm",onClick:b,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container min-w-[19rem]",children:[g&&e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"!mb-1",level:"body-md",children:t("common.type")}),e.jsx(We,{className:"w-full mb-4",value:n,onChange:(m,W)=>h(W??n),children:o.map(m=>e.jsx(Ae,{value:m,children:m},m))}),e.jsx(D,{className:"mb-2",level:"body-md",children:t("setting.sso-section.template")}),e.jsx(We,{className:"mb-1 h-auto w-full",value:y,onChange:(m,W)=>C(W??y),children:Oe.map(m=>e.jsx(Ae,{value:m.name,children:m.name},m.name))}),e.jsx(Q,{className:"!my-2"})]}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("common.name"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("common.name"),value:i.name,onChange:m=>d({...i,name:m.target.value}),fullWidth:!0}),e.jsx(D,{className:"!mb-1",level:"body-md",children:t("setting.sso-section.identifier-filter")}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.identifier-filter"),value:i.identifierFilter,onChange:m=>d({...i,identifierFilter:m.target.value}),fullWidth:!0}),e.jsx(Q,{className:"!my-2"}),n==="OAUTH2"&&e.jsxs(e.Fragment,{children:[g&&e.jsxs("p",{className:"border rounded-md p-2 text-sm w-full mb-2 break-all",children:[t("setting.sso-section.redirect-url"),": ",Ot("/auth/callback")]}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.client-id"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.client-id"),value:c.clientId,onChange:m=>R({clientId:m.target.value}),fullWidth:!0}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.client-secret"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.client-secret"),value:c.clientSecret,onChange:m=>R({clientSecret:m.target.value}),fullWidth:!0}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.authorization-endpoint"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.authorization-endpoint"),value:c.authUrl,onChange:m=>R({authUrl:m.target.value}),fullWidth:!0}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.token-endpoint"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.token-endpoint"),value:c.tokenUrl,onChange:m=>R({tokenUrl:m.target.value}),fullWidth:!0}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.user-endpoint"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.user-endpoint"),value:c.userInfoUrl,onChange:m=>R({userInfoUrl:m.target.value}),fullWidth:!0}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.scopes"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.scopes"),value:v,onChange:m=>p(m.target.value),fullWidth:!0}),e.jsx(Q,{className:"!my-2"}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.identifier"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.identifier"),value:c.fieldMapping.identifier,onChange:m=>R({fieldMapping:{...c.fieldMapping,identifier:m.target.value}}),fullWidth:!0}),e.jsx(D,{className:"!mb-1",level:"body-md",children:t("setting.sso-section.display-name")}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.display-name"),value:c.fieldMapping.displayName,onChange:m=>R({fieldMapping:{...c.fieldMapping,displayName:m.target.value}}),fullWidth:!0}),e.jsx(D,{className:"!mb-1",level:"body-md",children:t("common.email")}),e.jsx(N,{className:"mb-2",placeholder:t("common.email"),value:c.fieldMapping.email,onChange:m=>R({fieldMapping:{...c.fieldMapping,email:m.target.value}}),fullWidth:!0})]}),e.jsxs("div",{className:"mt-2 w-full flex flex-row justify-end items-center space-x-1",children:[e.jsx(z,{variant:"plain",color:"neutral",onClick:b,children:t("common.cancel")}),e.jsx(z,{onClick:U,disabled:!S(),children:t(g?"common.create":"common.update")})]})]})]})};function rt(a,t){G({className:"create-identity-provider-dialog",dialogName:"create-identity-provider-dialog"},xs,{identityProvider:a,confirmCallback:t})}const ps=()=>{const a=_(),o=te().state.systemStatus,[s]=f.useState({disablePasswordLogin:o.disablePasswordLogin}),[l,r]=f.useState([]);f.useEffect(()=>{i()},[]);const i=async()=>{const{data:n}=await Gt();r(n)},d=async n=>{let h=a("setting.sso-section.confirm-delete",{name:n.name});s.disablePasswordLogin&&(h+=`

`+a("setting.sso-section.disabled-password-login-warning")),ve({title:a("setting.sso-section.delete-sso"),content:h,style:"danger",dialogName:"delete-identity-provider-dialog",onConfirm:async()=>{try{await Jt(n.id)}catch(c){console.error(c),w.error(c.response.data.message)}await i()}})};return e.jsxs("div",{className:"w-full flex flex-col gap-2 pt-2 pb-4",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center gap-1",children:[e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx("span",{className:"font-mono text-gray-400",children:a("setting.sso-section.sso-list")}),e.jsx(Te,{url:"https://usememos.com/docs/advanced-settings/keycloak"})]}),e.jsx(z,{onClick:()=>rt(void 0,i),children:a("common.create")})]}),e.jsx(Q,{}),l.map(n=>e.jsxs("div",{className:"py-2 w-full border-b last:border-b dark:border-zinc-700 flex flex-row items-center justify-between",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsxs("p",{className:"ml-2",children:[n.name,e.jsxs("span",{className:"text-sm ml-1 opacity-40",children:["(",n.type,")"]})]})}),e.jsx("div",{className:"flex flex-row items-center",children:e.jsxs(qe,{children:[e.jsx(Xe,{size:"sm",children:e.jsx(T.MoreVertical,{className:"w-4 h-auto"})}),e.jsxs(Ye,{placement:"bottom-end",size:"sm",children:[e.jsx(Y,{onClick:()=>rt(n,i),children:a("common.edit")}),e.jsx(Y,{onClick:()=>d(n),children:a("common.delete")})]})]})})]},n.id)),l.length===0&&e.jsx("div",{className:"w-full mt-2 text-sm dark:border-zinc-700 opacity-60 flex flex-row items-center justify-between",children:e.jsx("p",{className:"",children:"No SSO found."})}),e.jsxs("div",{className:"w-full mt-4",children:[e.jsxs("p",{className:"text-sm",children:[a("common.learn-more"),":"]}),e.jsx(xt,{component:"ul",marker:"disc",size:"sm",children:e.jsx(Ge,{children:e.jsx(Z,{className:"text-sm text-blue-600 hover:underline",to:"https://www.usememos.com/docs/advanced-settings/keycloak",target:"_blank",children:"Configuring Keycloak for Authentication"})})})]})]})},ot=({text:a,icon:t,isSelected:o,onClick:s})=>e.jsxs("span",{onClick:s,className:`w-auto px-3 leading-8 flex flex-row justify-start items-center cursor-pointer rounded-lg select-none hover:opacity-80 ${o?"bg-zinc-100 shadow dark:bg-zinc-900":""}`,children:[e.jsx(t,{className:"w-4 h-auto mr-2 opacity-80"})," ",a]}),xe=a=>{const{className:t}=a;return e.jsx("span",{className:`mx-0.5 text-red-500 font-bold ${t??""}`,children:"*"})},gs=a=>{const t=_(),{destroy:o,storage:s,confirmCallback:l}=a,[r,i]=f.useState({name:""}),[d,n]=f.useState("S3"),[h,c]=f.useState({endPoint:"",region:"",accessKey:"",secretKey:"",path:"",bucket:"",urlPrefix:"",urlSuffix:"",presign:!1}),x=s===void 0;f.useEffect(()=>{s&&(i({name:s.name}),n(s.type),s.type==="S3"&&c(s.config.s3Config))},[]);const v=()=>{o()},p=()=>!(r.name===""||d==="S3"&&(h.endPoint===""||h.region===""||h.accessKey===""||h.secretKey===""||h.bucket==="")),y=async()=>{try{x?await Kt({...r,type:d,config:{s3Config:h}}):await qt({id:s.id,type:d,...r,config:{s3Config:h}})}catch(g){console.error(g),w.error(g.response.data.message)}l&&l(),o()},C=g=>{c({...h,...g})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("span",{className:"title-text ml-auto",children:t(x?"setting.storage-section.create-storage":"setting.storage-section.update-storage")}),e.jsx(O,{size:"sm",onClick:v,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container min-w-[19rem]",children:[e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("common.name"),e.jsx(xe,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("common.name"),value:r.name,onChange:g=>i({...r,name:g.target.value}),fullWidth:!0}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.storage-section.endpoint"),e.jsx(xe,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.s3-compatible-url"),value:h.endPoint,onChange:g=>C({endPoint:g.target.value}),fullWidth:!0}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.storage-section.region"),e.jsx(xe,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.region-placeholder"),value:h.region,onChange:g=>C({region:g.target.value}),fullWidth:!0}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.storage-section.accesskey"),e.jsx(xe,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.accesskey-placeholder"),value:h.accessKey,onChange:g=>C({accessKey:g.target.value}),fullWidth:!0}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.storage-section.secretkey"),e.jsx(xe,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.secretkey-placeholder"),value:h.secretKey,onChange:g=>C({secretKey:g.target.value}),fullWidth:!0}),e.jsxs(D,{className:"!mb-1",level:"body-md",children:[t("setting.storage-section.bucket"),e.jsx(xe,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.bucket-placeholder"),value:h.bucket,onChange:g=>C({bucket:g.target.value}),fullWidth:!0}),e.jsxs("div",{className:"flex flex-row items-center mb-1",children:[e.jsx(D,{level:"body-md",children:t("setting.storage-section.path")}),e.jsx(Te,{className:"ml-1",title:t("setting.storage-section.path-description"),url:"https://usememos.com/docs/advanced-settings/local-storage"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.path-placeholder")+"/{year}/{month}/{filename}",value:h.path,onChange:g=>C({path:g.target.value}),fullWidth:!0}),e.jsx(D,{className:"!mb-1",level:"body-md",children:t("setting.storage-section.url-prefix")}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.url-prefix-placeholder"),value:h.urlPrefix,onChange:g=>C({urlPrefix:g.target.value}),fullWidth:!0}),e.jsx(D,{className:"!mb-1",level:"body-md",children:t("setting.storage-section.url-suffix")}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.url-suffix-placeholder"),value:h.urlSuffix,onChange:g=>C({urlSuffix:g.target.value}),fullWidth:!0}),e.jsx(sa,{className:"mb-2",label:t("setting.storage-section.presign-placeholder"),checked:h.presign,onChange:g=>C({presign:g.target.checked})}),e.jsxs("div",{className:"mt-2 w-full flex flex-row justify-end items-center space-x-1",children:[e.jsx(z,{variant:"plain",color:"neutral",onClick:v,children:t("common.cancel")}),e.jsx(z,{onClick:y,disabled:!p(),children:t(x?"common.create":"common.update")})]})]})]})};function nt(a,t){G({className:"create-storage-service-dialog",dialogName:"create-storage-service-dialog"},gs,{storage:a,confirmCallback:t})}const fs=a=>{const t=_(),{destroy:o,localStoragePath:s,confirmCallback:l}=a,r=te(),[i,d]=f.useState(s||""),n=()=>{o()},h=async()=>{try{await ne({name:"local-storage-path",value:JSON.stringify(i.trim())}),await r.fetchSystemStatus()}catch(c){if(console.error(c),c.response.data.error){const x=c.response.data.error,v=x.indexOf("internal=");if(v!==-1){const p=x.substring(v+9);w.error(p)}}else w.error(c.response.data.message)}l&&l(),o()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("p",{className:"title-text",children:t("setting.storage-section.update-local-path")}),e.jsx(O,{size:"sm",onClick:n,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container max-w-xs",children:[e.jsx("p",{className:"text-sm break-words mb-1",children:t("setting.storage-section.update-local-path-description")}),e.jsxs("div",{className:"flex flex-row items-center mb-2 gap-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-400 break-all",children:["e.g. ","assets/{timestamp}_{filename}"]}),e.jsx(Te,{url:"https://usememos.com/docs/advanced-settings/local-storage"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.local-storage-path"),fullWidth:!0,value:i,onChange:c=>d(c.target.value)}),e.jsxs("div",{className:"mt-2 w-full flex flex-row justify-end items-center space-x-1",children:[e.jsx(z,{variant:"plain",color:"neutral",onClick:n,children:t("common.cancel")}),e.jsx(z,{onClick:h,children:t("common.update")})]})]})]})};function vs(a,t){G({className:"update-local-storage-dialog",dialogName:"update-local-storage-dialog"},fs,{localStoragePath:a,confirmCallback:t})}const ys=()=>{const a=_(),t=te(),o=t.state.systemStatus,[s,l]=f.useState(o.storageServiceId),[r,i]=f.useState([]);f.useEffect(()=>{d()},[]);const d=async()=>{const{data:c}=await Xt();i(c)},n=async c=>{await ne({name:"storage-service-id",value:JSON.stringify(c)});try{await t.fetchSystemStatus()}catch(x){console.error(x)}l(c)},h=c=>{ve({title:a("setting.storage-section.delete-storage"),content:a("setting.storage-section.warning-text",{name:c.name}),style:"danger",dialogName:"delete-storage-dialog",onConfirm:async()=>{try{await Yt(c.id)}catch(x){console.error(x),w.error(x.response.data.message)}await d()}})};return e.jsxs("div",{className:"w-full flex flex-col gap-2 pt-2 pb-4",children:[e.jsx("div",{className:"w-full flex flex-row justify-start items-center",children:e.jsx("span",{className:"font-mono text-sm text-gray-400 mr-2 dark:text-gray-500",children:a("setting.storage-section.current-storage")})}),e.jsxs(Ze,{className:"w-full",value:s,onChange:c=>{n(Number(c.target.value))},children:[e.jsx(fe,{value:"0",label:a("setting.storage-section.type-database")}),e.jsxs("div",{className:"w-full mt-2 flex flex-row justify-start items-center gap-x-2",children:[e.jsx(fe,{value:"-1",label:a("setting.storage-section.type-local")}),e.jsx(O,{size:"sm",onClick:()=>vs(o.localStoragePath),children:e.jsx(T.PenBox,{className:"w-4 h-auto"})})]}),r.map(c=>e.jsx(fe,{value:c.id,label:c.name},c.id))]}),e.jsx(Q,{className:"!my-2"}),e.jsxs("div",{className:"mb-2 w-full flex flex-row justify-between items-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-mono text-sm text-gray-400",children:a("setting.storage-section.storage-services")}),e.jsx(Te,{url:"https://usememos.com/docs/advanced-settings/cloudflare-r2"})]}),e.jsx(z,{onClick:()=>nt(void 0,d),children:a("common.create")})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[r.map(c=>e.jsxs("div",{className:"py-2 w-full border-t last:border-b dark:border-zinc-700 flex flex-row items-center justify-between",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsx("p",{className:"ml-2",children:c.name})}),e.jsx("div",{className:"flex flex-row items-center",children:e.jsxs(qe,{children:[e.jsx(Xe,{size:"sm",children:e.jsx(T.MoreVertical,{className:"w-4 h-auto"})}),e.jsxs(Ye,{placement:"bottom-end",size:"sm",children:[e.jsx(Y,{onClick:()=>nt(c,d),children:a("common.edit")}),e.jsx(Y,{onClick:()=>h(c),children:a("common.delete")})]})]})})]},c.id)),r.length===0&&e.jsx("div",{className:"w-full text-sm dark:border-zinc-700 opacity-60 flex flex-row items-center justify-between",children:e.jsx("p",{className:"",children:"No storage service found."})})]}),e.jsxs("div",{className:"w-full mt-4",children:[e.jsxs("p",{className:"text-sm",children:[a("common.learn-more"),":"]}),e.jsxs(xt,{component:"ul",marker:"disc",size:"sm",children:[e.jsx(Ge,{children:e.jsx(Z,{className:"text-sm text-blue-600 hover:underline",to:"https://www.usememos.com/docs/advanced-settings/local-storage",target:"_blank",children:"Docs - Local storage"})}),e.jsx(Ge,{children:e.jsx(Z,{className:"text-sm text-blue-600 hover:underline",to:"https://www.usememos.com/blog/choosing-a-storage-for-your-resource",target:"_blank",children:"Choosing a Storage for Your Resource: Database, S3 or Local Storage?"})})]})]})]})},bs=({destroy:a})=>{const t=_(),o=te(),[s,l]=f.useState(o.state.systemStatus.customizedProfile),r=()=>{a()},i=y=>{l(C=>({...C,...y}))},d=y=>{i({name:y.target.value})},n=y=>{i({logoUrl:y.target.value})},h=y=>{i({description:y.target.value})},c=y=>{i({locale:y})},x=y=>{i({appearance:y})},v=()=>{i({name:"Memos",logoUrl:"/logo.webp",description:"",locale:"en",appearance:"system"})},p=async()=>{if(s.name===""){w.error(t("message.fill-server-name"));return}try{await ne({name:"customized-profile",value:JSON.stringify(s)}),await o.fetchSystemStatus()}catch(y){console.error(y);return}w.success(t("message.succeed-update-customized-profile")),a()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("p",{className:"title-text",children:t("setting.system-section.customize-server.title")}),e.jsx(O,{size:"sm",onClick:r,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container min-w-[16rem]",children:[e.jsx("p",{className:"text-sm mb-1",children:t("setting.system-section.server-name")}),e.jsx(N,{className:"w-full",type:"text",value:s.name,onChange:d}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:t("setting.system-section.customize-server.icon-url")}),e.jsx(N,{className:"w-full",type:"text",value:s.logoUrl,onChange:n}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:t("setting.system-section.customize-server.description")}),e.jsx(Ke,{className:"w-full",minRows:"2",maxRows:"4",value:s.description,onChange:h}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:t("setting.system-section.customize-server.locale")}),e.jsx(ft,{className:"!w-full",value:s.locale,onChange:c}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:t("setting.system-section.customize-server.appearance")}),e.jsx(vt,{className:"!w-full",value:s.appearance,onChange:x}),e.jsxs("div",{className:"mt-4 w-full flex flex-row justify-between items-center space-x-2",children:[e.jsx("div",{className:"flex flex-row justify-start items-center",children:e.jsx(z,{variant:"outlined",onClick:v,children:t("common.restore")})}),e.jsxs("div",{className:"flex flex-row justify-end items-center",children:[e.jsx(z,{variant:"plain",onClick:r,children:t("common.cancel")}),e.jsx(z,{onClick:p,children:t("common.save")})]})]})]})]})};function js(){G({className:"update-customized-profile-dialog",dialogName:"update-customized-profile-dialog"},bs)}const ws=()=>{const a=_(),t=te(),o=t.state.systemStatus,[s,l]=f.useState({disablePublicMemos:o.disablePublicMemos,maxUploadSizeMiB:o.maxUploadSizeMiB,memoDisplayWithUpdatedTs:o.memoDisplayWithUpdatedTs}),[r,i]=f.useState(et.fromPartial({})),[d,n]=f.useState("");f.useEffect(()=>{(async()=>{await t.fetchSystemStatus();const{setting:u}=await me.getWorkspaceSetting({name:`${ue}${he.WORKSPACE_SETTING_GENERAL}`});u&&u.generalSetting&&i(et.fromPartial(u.generalSetting))})()},[]),f.useEffect(()=>{Zt().then(({data:u})=>{const k=u.find(M=>M.name==="telegram-bot-token");k&&n(k.value)})},[]),f.useEffect(()=>{l({...s,disablePublicMemos:o.disablePublicMemos,maxUploadSizeMiB:o.maxUploadSizeMiB,memoDisplayWithUpdatedTs:o.memoDisplayWithUpdatedTs})},[o]);const h=async u=>{const k={...r,disallowSignup:!u};await me.setWorkspaceSetting({setting:{name:`${ue}${he.WORKSPACE_SETTING_GENERAL}`,generalSetting:k}}),i(k)},c=async u=>{const k={...r,disallowPasswordLogin:u};await me.setWorkspaceSetting({setting:{name:`${ue}${he.WORKSPACE_SETTING_GENERAL}`,generalSetting:k}}),i(k)},x=()=>{js()},v=u=>{i({...r,instanceUrl:u})},p=async()=>{try{await me.setWorkspaceSetting({setting:{name:`${ue}${he.WORKSPACE_SETTING_GENERAL}`,generalSetting:r}})}catch(u){console.error(u),w.error(u.response.data.message);return}w.success("Instance URL updated")},y=u=>{n(u)},C=async()=>{try{await ne({name:"telegram-bot-token",value:d})}catch(u){console.error(u),w.error(u.response.data.message);return}w.success("Telegram Bot Token updated")},g=u=>{i({...r,additionalStyle:u})},b=async()=>{try{await me.setWorkspaceSetting({setting:{name:`${ue}${he.WORKSPACE_SETTING_GENERAL}`,generalSetting:r}})}catch(u){w.error(u.response.data.message),console.error(u);return}w.success(a("message.succeed-update-additional-style"))},S=u=>{i({...r,additionalScript:u})},U=async()=>{try{await me.setWorkspaceSetting({setting:{name:`${ue}${he.WORKSPACE_SETTING_GENERAL}`,generalSetting:r}})}catch(u){w.error(u.response.data.message),console.error(u);return}w.success(a("message.succeed-update-additional-script"))},R=async u=>{l({...s,disablePublicMemos:u}),t.setSystemStatus({disablePublicMemos:u}),await ne({name:"disable-public-memos",value:JSON.stringify(u)})},m=async u=>{l({...s,memoDisplayWithUpdatedTs:u}),t.setSystemStatus({memoDisplayWithUpdatedTs:u}),await ne({name:"memo-display-with-updated-ts",value:JSON.stringify(u)})},W=async u=>{u.target.selectionEnd=u.target.value.length;let k=parseInt(u.target.value);Number.isNaN(k)&&(k=0),l({...s,maxUploadSizeMiB:k}),u.target.value=k.toString(),t.setSystemStatus({maxUploadSizeMiB:k}),await ne({name:"max-upload-size-mib",value:JSON.stringify(k)})},$=u=>{u.target.select()};return e.jsxs("div",{className:"w-full flex flex-col gap-2 pt-2 pb-4",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:a("common.basic")}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[a("setting.system-section.server-name"),": ",e.jsx("span",{className:"font-mono font-bold",children:o.customizedProfile.name})]}),e.jsx(z,{onClick:x,children:a("common.edit")})]}),e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:"General"}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{className:"mr-1",children:a("setting.system-section.allow-user-signup")}),e.jsx(De,{checked:!r.disallowSignup,onChange:u=>h(u.target.checked)})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{className:"mr-1",children:a("setting.system-section.disable-password-login")}),e.jsx(De,{checked:r.disallowPasswordLogin,onChange:u=>c(u.target.checked)})]}),e.jsxs("div",{className:"space-y-2 border rounded-md py-2 px-3 dark:border-zinc-700",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsx("div",{className:"w-auto flex items-center",children:e.jsx("span",{className:"mr-1",children:"Instance URL"})})}),e.jsx(z,{variant:"outlined",color:"neutral",onClick:p,children:a("common.save")})]}),e.jsx(N,{className:"w-full",sx:{fontFamily:"monospace",fontSize:"14px"},placeholder:"Should be started with http:// or https://",value:r.instanceUrl,onChange:u=>v(u.target.value)}),e.jsx("div",{className:"w-full",children:e.jsxs(Z,{className:"text-gray-500 text-sm inline-flex flex-row justify-start items-center hover:underline hover:text-blue-600",to:"https://usememos.com/docs/advanced-settings/seo",target:"_blank",children:[a("common.learn-more"),e.jsx(T.ExternalLink,{className:"inline w-4 h-auto ml-1"})]})})]}),e.jsxs("div",{className:"space-y-2 border rounded-md py-2 px-3 dark:border-zinc-700",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{children:a("setting.system-section.additional-style")}),e.jsx(z,{variant:"outlined",color:"neutral",onClick:b,children:a("common.save")})]}),e.jsx(Ke,{className:"w-full",sx:{fontFamily:"monospace",fontSize:"14px"},minRows:2,maxRows:4,placeholder:a("setting.system-section.additional-style-placeholder"),value:r.additionalStyle,onChange:u=>g(u.target.value)}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{children:a("setting.system-section.additional-script")}),e.jsx(z,{variant:"outlined",color:"neutral",onClick:U,children:a("common.save")})]}),e.jsx(Ke,{className:"w-full",color:"neutral",sx:{fontFamily:"monospace",fontSize:"14px"},minRows:2,maxRows:4,placeholder:a("setting.system-section.additional-script-placeholder"),value:r.additionalScript,onChange:u=>S(u.target.value)}),e.jsx("div",{className:"w-full",children:e.jsxs(Z,{className:"text-gray-500 text-sm flex flex-row justify-start items-center hover:underline hover:text-blue-600",to:"https://usememos.com/docs/advanced-settings/custom-style-and-script",target:"_blank",children:[a("common.learn-more"),e.jsx(T.ExternalLink,{className:"inline w-4 h-auto ml-1"})]})})]}),e.jsx(Q,{className:"!my-3"}),e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:"Others"}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{children:a("setting.system-section.disable-public-memos")}),e.jsx(De,{checked:s.disablePublicMemos,onChange:u=>R(u.target.checked)})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{children:a("setting.system-section.display-with-updated-time")}),e.jsx(De,{checked:s.memoDisplayWithUpdatedTs,onChange:u=>m(u.target.checked)})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("span",{className:"mr-1",children:a("setting.system-section.max-upload-size")}),e.jsx(ht,{title:a("setting.system-section.max-upload-size-hint"),placement:"top",children:e.jsx(T.HelpCircle,{className:"w-4 h-auto"})})]}),e.jsx(N,{className:"w-16",sx:{fontFamily:"monospace"},defaultValue:s.maxUploadSizeMiB,onFocus:$,onChange:W})]}),e.jsxs("div",{className:"space-y-2 border rounded-md py-2 px-3 dark:border-zinc-700",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsx("div",{className:"w-auto flex items-center",children:e.jsx("span",{className:"mr-1",children:a("setting.system-section.telegram-bot-token")})})}),e.jsx(z,{variant:"outlined",color:"neutral",onClick:C,children:a("common.save")})]}),e.jsx(N,{className:"w-full",sx:{fontFamily:"monospace",fontSize:"14px"},placeholder:a("setting.system-section.telegram-bot-token-placeholder"),value:d,onChange:u=>y(u.target.value)}),e.jsx("div",{className:"w-full",children:e.jsxs(Z,{className:"text-gray-500 text-sm inline-flex flex-row justify-start items-center hover:underline hover:text-blue-600",to:"https://usememos.com/docs/integration/telegram-bot",target:"_blank",children:[a("common.learn-more"),e.jsx(T.ExternalLink,{className:"inline w-4 h-auto ml-1"})]})})]})]})},lt=["my-account","preference"],it=["member","system","storage","sso"],ct={"my-account":T.User,preference:T.Cog,member:T.Users,system:T.Settings2,storage:T.Database,sso:T.Key},Es=()=>{const a=_(),t=ee(),o=te(),[s,l]=f.useState({selectedSection:"my-account"}),r=t.role===pe.HOST,i=f.useMemo(()=>{let n=[...lt];return r&&(n=n.concat(it)),n},[r]),d=f.useCallback(n=>{l({selectedSection:n})},[]);return e.jsxs("section",{className:"@container w-full max-w-5xl min-h-full flex flex-col justify-start items-start sm:pt-3 md:pt-6 pb-8",children:[e.jsx(Qt,{}),e.jsx("div",{className:"w-full px-4 sm:px-6",children:e.jsxs("div",{className:"w-full shadow flex flex-row justify-start items-start px-4 py-3 rounded-xl bg-white dark:bg-zinc-800 text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"hidden sm:flex flex-col justify-start items-start w-40 h-auto shrink-0 py-2",children:[e.jsx("span",{className:"text-sm mt-0.5 pl-3 font-mono select-none text-gray-400 dark:text-gray-500",children:a("common.basic")}),e.jsx("div",{className:"w-full flex flex-col justify-start items-start mt-1",children:lt.map(n=>e.jsx(ot,{text:a(`setting.${n}`),icon:ct[n],isSelected:s.selectedSection===n,onClick:()=>d(n)},n))}),r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm mt-4 pl-3 font-mono select-none text-gray-400 dark:text-gray-500",children:a("common.admin")}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start mt-1",children:[it.map(n=>e.jsx(ot,{text:a(`setting.${n}`),icon:ct[n],isSelected:s.selectedSection===n,onClick:()=>d(n)},n)),e.jsxs("span",{className:"px-3 mt-2 opacity-70 text-sm",children:["Version: v",o.state.systemStatus.profile.version]})]})]}):null]}),e.jsxs("div",{className:"w-full grow sm:pl-4 overflow-x-auto",children:[e.jsx("div",{className:"w-auto inline-block my-2 sm:hidden",children:e.jsx(We,{value:s.selectedSection,onChange:(n,h)=>d(h),children:i.map(n=>e.jsx(Ae,{value:n,children:a(`setting.${n}`)},n))})}),s.selectedSection==="my-account"?e.jsx(cs,{}):s.selectedSection==="preference"?e.jsx(hs,{}):s.selectedSection==="member"?e.jsx(es,{}):s.selectedSection==="system"?e.jsx(ws,{}):s.selectedSection==="storage"?e.jsx(ys,{}):s.selectedSection==="sso"?e.jsx(ps,{}):null]})]})})]})};export{Es as default};
