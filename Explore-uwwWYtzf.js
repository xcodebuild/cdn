import{u as y,k as g,l as w,m as M,r as m,j as e,I as f,B as N}from"./index-DRKdyhzb.js";import{E}from"./Empty-BkwmF9Ca.js";import{u as T,M as S}from"./useFilterWithUrlParams-BmmRipFM.js";import{M as v}from"./MemoView-Cm1UAYRp.js";import{M as L}from"./MobileHeader-DhNMB_G6.js";import{D as I}from"./CommonDialog-aMGtbYQ-.js";import{g as p}from"./index-2UGuc62r.js";import"./VisibilityIcon-ijzoLo4J.js";import"./Typography-B6lazjNl.js";import"./useLoading-Dble4Yjd.js";import"./index-BG_UZG-p.js";import"./Select-2jlx2KYh.js";import"./createSvgIcon-DiGfNeH6.js";import"./Checkbox-BFDDHFvA.js";import"./Link-bshFRLSU.js";import"./ResourceIcon-CVNzAEyj.js";import"./Divider-ByJybYhk.js";import"./last-DXTTfs9a.js";const H=()=>{const a=y(),x=g(),d=w(),n=M(),[h,l]=m.useState(!0),r=m.useRef(void 0),{tag:i,text:o}=T(),c=n.value.sort((t,s)=>p(s.displayTime)-p(t.displayTime));m.useEffect(()=>{r.current=void 0,n.reset(),u()},[i,o]);const u=async()=>{const t=['row_status == "NORMAL"',`visibilities == [${x?"'PUBLIC', 'PROTECTED'":"'PUBLIC'"}]`],s=[];i&&s.push(JSON.stringify(`#${i}`)),o&&s.push(JSON.stringify(o)),s.length>0&&t.push(`content_search == [${s.join(", ")}]`),l(!0);const j=await d.fetchMemos({pageSize:I,filter:t.join(" && "),pageToken:r.current});l(!1),r.current=j.nextPageToken};return e.jsxs("section",{className:"@container w-full max-w-5xl min-h-full flex flex-col justify-start items-center sm:pt-3 md:pt-6 pb-8",children:[e.jsx(L,{}),e.jsxs("div",{className:"relative w-full h-auto flex flex-col justify-start items-start px-4 sm:px-6",children:[e.jsx(S,{className:"px-2 pb-2"}),c.map(t=>e.jsx(v,{memo:t,showCreator:!0},`${t.id}-${t.displayTime}`)),h?e.jsxs("div",{className:"flex flex-row justify-center items-center w-full my-4 text-gray-400",children:[e.jsx(f.Loader,{className:"w-4 h-auto animate-spin mr-1"}),e.jsx("p",{className:"text-sm italic",children:a("memo.fetching-data")})]}):r.current?e.jsx("div",{className:"w-full flex flex-row justify-center items-center my-4",children:e.jsx(N,{variant:"plain",endDecorator:e.jsx(f.ArrowDown,{className:"w-5 h-auto"}),onClick:u,children:a("memo.fetch-more")})}):c.length===0&&e.jsxs("div",{className:"w-full mt-12 mb-8 flex flex-col justify-center items-center italic",children:[e.jsx(E,{}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:a("message.no-data")})]})]})]})};export{H as default};
